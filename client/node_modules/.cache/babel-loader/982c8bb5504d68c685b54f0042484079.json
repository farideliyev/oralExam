{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ferid\\\\Desktop\\\\Polito\\\\Katya\\\\client\\\\src\\\\hoc\\\\withAuthRedirect.js\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { AuthContext } from \"../auth/authContext\";\nimport { Redirect } from \"react-router\";\nexport const withAuthRedirect = Component => {\n  const {\n    status,\n    setStatus\n  } = useState(null);\n  useEffect(() => {\n    fetchToAdmin();\n  }, []);\n\n  async function fetchToAdmin() {\n    let response = await fetch(\"http://localhost:3000/api/admin\");\n\n    if (response.status == 200) {\n      setStatus(200);\n    } else if (response.status === 401) {\n      setStatus(401);\n    }\n  }\n\n  return function () {\n    const {\n      state\n    } = useContext(AuthContext);\n    debugger;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }\n    }, status === null || status === 401 ? /*#__PURE__*/React.createElement(Redirect, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 17\n      }\n    }) : /*#__PURE__*/React.createElement(Component, {\n      user: state.user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 17\n      }\n    }));\n  };\n};","map":{"version":3,"sources":["C:/Users/ferid/Desktop/Polito/Katya/client/src/hoc/withAuthRedirect.js"],"names":["React","useContext","useEffect","useState","AuthContext","Redirect","withAuthRedirect","Component","status","setStatus","fetchToAdmin","response","fetch","state","user"],"mappings":";AAAA,OAAOA,KAAP,IAAeC,UAAf,EAA2BC,SAA3B,EAAsCC,QAAtC,QAAqD,OAArD;AACA,SAAQC,WAAR,QAA0B,qBAA1B;AACA,SAAQC,QAAR,QAAuB,cAAvB;AAEA,OAAO,MAAMC,gBAAgB,GAAIC,SAAD,IAAe;AAC7C,QAAM;AAACC,IAAAA,MAAD;AAASC,IAAAA;AAAT,MAAoBN,QAAQ,CAAC,IAAD,CAAlC;AACAD,EAAAA,SAAS,CAAC,MAAI;AACZQ,IAAAA,YAAY;AACb,GAFQ,EAEN,EAFM,CAAT;;AAIA,iBAAeA,YAAf,GAA6B;AAC3B,QAAIC,QAAQ,GAAE,MAAMC,KAAK,CAAC,iCAAD,CAAzB;;AACA,QAAGD,QAAQ,CAACH,MAAT,IAAiB,GAApB,EAAwB;AACtBC,MAAAA,SAAS,CAAC,GAAD,CAAT;AACD,KAFD,MAEO,IAAGE,QAAQ,CAACH,MAAT,KAAkB,GAArB,EAAyB;AAC9BC,MAAAA,SAAS,CAAC,GAAD,CAAT;AACD;AACF;;AACD,SAAO,YAAY;AACjB,UAAM;AAACI,MAAAA;AAAD,QAAUZ,UAAU,CAACG,WAAD,CAA1B;AAIA;AACA,wBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGI,MAAM,KAAG,IAAT,IAAiBA,MAAM,KAAK,GAA5B,gBACK,oBAAC,QAAD;AAAU,MAAA,EAAE,EAAC,GAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADL,gBAEK,oBAAC,SAAD;AAAW,MAAA,IAAI,EAAEK,KAAK,CAACC,IAAvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHR,CADJ;AASD,GAfD;AAgBD,CA9BM","sourcesContent":["import React, {useContext, useEffect, useState} from \"react\";\r\nimport {AuthContext} from \"../auth/authContext\";\r\nimport {Redirect} from \"react-router\";\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n  const {status, setStatus}=useState(null)\r\n  useEffect(()=>{\r\n    fetchToAdmin()\r\n  }, [])\r\n\r\n  async function fetchToAdmin(){\r\n    let response= await fetch(\"http://localhost:3000/api/admin\")\r\n    if(response.status==200){\r\n      setStatus(200)\r\n    } else if(response.status===401){\r\n      setStatus(401)\r\n    }\r\n  }\r\n  return function () {\r\n    const {state} = useContext(AuthContext)\r\n\r\n\r\n\r\n    debugger\r\n    return (\r\n        <div>\r\n          {status===null || status === 401\r\n              ? <Redirect to='/'/>\r\n              : <Component user={state.user}/>\r\n          }\r\n        </div>\r\n    )\r\n\r\n  }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}